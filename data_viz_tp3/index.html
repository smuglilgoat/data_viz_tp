<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      path.countries {
        stroke-width: 1;
        stroke: black;
        opacity: 0.5;
        fill: rgb(255, 255, 255);
      }
    </style>
    <script src="d3.v3.js"></script>
  </head>
  <body></body>
  <script>
    //Width and height
    var w = 900;
    var h = 600;

    var path = d3.geo.path();

    //Create SVG element
    var svg = d3
      .select("body")
      .append("svg")
      .attr("width", w)
      .attr("height", h);

    d3.json("usthbBrut.json", (x) => {
      var bounds = path.bounds(x.features[1]);
      var hscale = (scale * w) / (bounds[1][0] - bounds[0][0]);
      var vscale = (scale * h) / (0.002 + bounds[1][1] - bounds[0][1]);
      var scale = hscale < vscale ? hscale : vscale;
      var offset = [
        w - (bounds[0][0] + bounds[1][0]) / 2,
        h - (bounds[0][1] + bounds[1][1]) / 2,
      ];

      var projection = d3.geo
        .albers()
        .scale(scale)
        .translate(offset);

      var geoPath = d3.geo.path().projection(projection);

      d3.select("svg")
        .selectAll("path")
        // .data(x.features.filter(function (d) { return ["DZA", "CHN", "AUT"].includes(d.id)}))
        .data(x.features)
        .enter()
        .append("path")
        .attr("d", geoPath)
        .attr("class", "countries");
    });
  </script>
</html>
